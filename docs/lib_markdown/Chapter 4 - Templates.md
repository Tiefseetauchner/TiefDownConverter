# Templates

Templating in TiefDown is done in several ways:

- [LaTeX templates](#latex-templates)
  - The most basic form of templating, it generates a LaTeX document from the
    markdown files that can be included in a LaTeX document.
  - Supports Metadata file generation.
- [Typst templates](#typst-templates)
  - Similar to LaTeX, it generates a Typst document from the markdown files
    that can be included in a Typst document.
  - Supports Metadata file generation.
- [EPUB templates](#epub-templates)
  - A legacy templating system, it generates a EPUB document from the markdown
    files. Convoluted and very much custom to basic usage.
  - Adds Metadata directly to the EPUB file.
  - (!) This template type should be forgone in favour of Custom Pandoc
    Conversion.
- [Custom pandoc conversion](#custom-pandoc-conversion)
  - A more advanced templating system, it runs custom pandoc commands on the
    markdown files. This is the most flexible templating system, but also the
    most complex.
  - Supports Metadata insertion into command line arguments.

## LaTeX Templates

LaTeX templates are the most intuitive form of templating in TiefDown, but also
the most fleshed out. The basic usage generates a LaTeX document from markdown,
usually output.tex, with [lua-filters](#lua-filters) applied depending on the
template, and then converts that template file to a PDF.

The LaTeX file must include the following:

```latex
\input{./output.tex}
```

This imports the converted markdown files into the LaTeX document. You may
adjust the behaviour by using [custom preprocessors](#custom-processors) and
[custom processors](#custom-processors).

For Metadata, one can also import the metadata file, which is generated by
TiefDown during the conversion process.

```latex
\input{./metadata.tex}
```

This file provides a macro to access metadata using the `\meta{}` keyword.
This can be adjusted using the [metadata settings](#metadata-settings).

There are preset templates available in the core library. These give a basic
framework for extension and shouldn't be taken as the only way to use LaTeX
templates.

## Typst Templates

Typst templates are, in concept, identical to LaTeX templates. They generate a
Typst document from markdown, usually output.typ, with [lua-filters](#lua-filters)
applied depending on the template, and then converts that template file to a PDF.

Importing the typst file works similar:

```typst
#include "output.typ"
```

Again, see [custom preprocessors](#custom-processors) and
[custom processors](#custom-processors) for more information on customization.

Metadata importing is easier as typst has an object system.

```typst
#import "./metadata.typ": meta
```

One can then access metadata using the `meta` object.

There are also preset templates available in the core library. Again, these
are just a basic suggestion.

## EPUB Templates

EPUB templates are a special version of custom pandoc conversion. They are
legacy and should be avoided in favour of custom pandoc conversion. Thus,
they are not documented here.

## Custom Pandoc Conversion

Custom pandoc conversion is the most advanced templating system in TiefDown.
It allows specifying the exact pandoc command to run on the markdown files,
but does not allow any post processing like LaTeX or Typst.

A template requires a [custom preprocessor](#custom-processors) to be specified.
This processor defines the pandoc command to run and must include an output
file. The output file must then also be included in the template for copying
to the output folder.

The pandoc conversion runs in the compilation directory of the markdown project
and can thus access the markdown file. This is always available as
`combined.md`. See [conversion folders](#conversion-folders) for more
information.
